<!DOCTYPE html>
<html lang="en" ng-app="osasg">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0">
    <link href="stylesheets/style.css" rel="stylesheet">
    <script src='https://www.google.com/recaptcha/api.js'></script>
    <title>Log in</title>
    <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.4.3/angular.min.js'></script>
    <script src="/javascript/osasg_client.js"></script>
  </head>
  <body>
    <h1>Log in</h1>
    <span ng-if="<%= isGuest %>">
      <p>To log in, simply enter your email address and you'll receive a link to your existing or newly created account. (However, logging in currently adds no functionality)</p>
      <form name="loginForm" ng-controller="LoginFormController as formCtrl" ng-submit="formCtrl.submit()">
        <div ng-hide="formCtrl.emailSent || formCtrl.isSubmiting">
          <p>
            <label for="email">Emaill:</label>
            <input id="email" ng-model="formCtrl.email" type="email">
          </p>
          <div class="g-recaptcha"data-sitekey="6LfBcBwTAAAAALSvCgzHZi1HyoivDwYg-0g0Y2Bq"></div>
          <p class="error" ng-show="formCtrl.error != null">{{ formCtrl.error.message }}</p>
          <p><input type="submit" value="Login"></p>
        </div>
        <p ng-show="formCtrl.isSubmiting"><strong>Login in...</strong></p>
        <p ng-show="formCtrl.emailSent"><strong>{{ formCtrl.successMessage }}</strong></p>
      </form>
    </span>
    <span ng-if="!<%= isGuest %>">
      <p>You are already logged in as <%= username %>.</p>
      <form action="/logout">
        <p><input type="submit" value="Logout"></p>
      </form>
    </span>
  </body>
</html>